{"version":3,"file":"expansion-panel.js","sourceRoot":"","sources":["../../src/fixtures/expansion-panel.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  LitElement,\n  html,\n  css,\n  customElement,\n  property,\n  query,\n  PropertyValues\n} from 'lit-element';\nimport { styleMap } from 'lit-html/directives/style-map.js';\n\n/**\n * A custom element similar to the HTML5 `<details>` element.\n *\n * @element expansion-panel\n *\n * @slot - Slot fot panel content\n * @slot header - Slot for panel header\n *\n * @attr {boolean} focused - State attribute set when element has focus.\n * @attr {boolean} focus-ring - State attribute set when focused from keyboard.\n *\n * @cssprop --panel-header-background - Default panel header background color.\n * @cssprop --panel-header-min-height - Panel header minimum height.\n * @cssprop --panel-ripple-background - Active toggle button ripple background.\n *\n * @csspart header - An element wrapping the `header` slot.\n * @csspart toggle - A toggle button, child of the header part.\n * @csspart content - An element wrapping the `content` slot.\n *\n * @fires opened-changed - Event fired when expanding / collapsing\n */\n@customElement('expansion-panel')\nexport class ExpansionPanel extends LitElement {\n  /**\n   * When true, the panel content is expanded and visible\n   */\n  @property({ type: Boolean, reflect: true }) opened?: boolean | null = false;\n\n  /**\n   * Disabled panel can not be expanded or collapsed\n   */\n  @property({ type: Boolean, reflect: true }) disabled = false;\n\n  @query('[part=\"header\"]')\n  protected header?: HTMLDivElement;\n\n  protected _isShiftTabbing = false;\n\n  protected _tabPressed = false;\n\n  private _boundBodyKeydown = this._onBodyKeydown.bind(this);\n\n  private _boundBodyKeyup = this._onBodyKeyup.bind(this);\n\n  static get styles() {\n    return css`\n      :host {\n        display: block;\n        outline: none;\n        color: rgba(0, 0, 0, 0.87);\n        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),\n          0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);\n\n        --panel-header-background: #fff;\n        --panel-header-min-height: 48px;\n        --panel-ripple-background: rgba(0, 0, 0, 0.38);\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      [part='content'] {\n        display: none;\n        overflow: hidden;\n        padding: 16px 24px 24px;\n      }\n\n      [part='header'] {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        width: 100%;\n        position: relative;\n        outline: none;\n        min-height: var(--panel-header-min-height);\n        padding: 0 24px;\n        box-sizing: border-box;\n        font-weight: 500;\n        font-size: 13px;\n        background-color: var(--panel-header-background);\n        color: inherit;\n        cursor: default;\n        -webkit-tap-highlight-color: transparent;\n      }\n\n      :host([disabled]) [part='header'] {\n        filter: brightness(75%);\n        opacity: 0.75;\n        pointer-events: none;\n      }\n\n      :host([opened]) [part='content'] {\n        display: block;\n        overflow: visible;\n      }\n\n      :host([focus-ring]) [part='header'] {\n        filter: brightness(90%);\n      }\n\n      [part='header'] ::slotted(*) {\n        margin: 12px 0;\n      }\n\n      [part='toggle'] {\n        position: absolute;\n        order: 1;\n        right: 8px;\n        width: 24px;\n        height: 24px;\n        padding: 4px;\n        text-align: center;\n        transform: rotate(45deg);\n        transition: transform 0.1s cubic-bezier(0.4, 0, 0.2, 0.1);\n      }\n\n      [part='toggle']::before {\n        width: 7px;\n        position: absolute;\n        height: 7px;\n        left: 50%;\n        top: 50%;\n        content: '';\n        border-width: 0 2px 2px 0;\n        transform: translateX(-60%) translateY(-60%);\n        border-style: solid;\n        border-color: currentColor;\n      }\n\n      [part='toggle']::after {\n        display: inline-block;\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        border-radius: 50%;\n        background: var(--panel-ripple-background);\n        transform: scale(0);\n        opacity: 0;\n        transition: transform 0s 0.8s, opacity 0.8s;\n        will-change: transform, opacity;\n      }\n\n      :host(:not([disabled])) [part='header']:active [part='toggle']::after {\n        transition-duration: 0.08s, 0.01s;\n        transition-delay: 0s, 0s;\n        transform: scale(1.25);\n        opacity: 0.15;\n      }\n\n      :host([opened]) [part='toggle'] {\n        transform: rotate(225deg);\n      }\n    `;\n  }\n\n  render() {\n    return html`\n      <div role=\"heading\">\n        <div\n          role=\"button\"\n          part=\"header\"\n          @click=\"${this._onToggleClick}\"\n          @keydown=\"${this._onToggleKeyDown}\"\n          aria-expanded=\"${this.opened ? 'true' : 'false'}\"\n          tabindex=\"0\"\n        >\n          <span part=\"toggle\"></span>\n          <slot name=\"header\"></slot>\n        </div>\n      </div>\n      <div\n        part=\"content\"\n        style=\"${styleMap({ maxHeight: this.opened ? '' : '0px' })}\"\n        aria-hidden=\"${this.opened ? 'false' : 'true'}\"\n      >\n        <slot></slot>\n      </div>\n    `;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    document.body.addEventListener('keydown', this._boundBodyKeydown, true);\n    document.body.addEventListener('keyup', this._boundBodyKeyup, true);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    document.body.removeEventListener('keydown', this._boundBodyKeydown, true);\n    document.body.removeEventListener('keyup', this._boundBodyKeyup, true);\n  }\n\n  focus() {\n    if (this.header) {\n      this.header.focus();\n    }\n  }\n\n  protected firstUpdated() {\n    this.setAttribute('tabindex', '0');\n    this.addEventListener('focusin', e => {\n      if (e.composedPath()[0] === this) {\n        if (this._isShiftTabbing) {\n          return;\n        }\n        this._setFocused(true);\n        this.focus();\n      } else if (\n        this.header &&\n        e.composedPath().indexOf(this.header) !== -1 &&\n        !this.disabled\n      ) {\n        this._setFocused(true);\n      }\n    });\n\n    this.addEventListener('focusout', () => this._setFocused(false));\n\n    this.addEventListener('keydown', e => {\n      if (e.shiftKey && e.keyCode === 9) {\n        this._isShiftTabbing = true;\n        HTMLElement.prototype.focus.apply(this);\n        this._setFocused(false);\n        setTimeout(() => {\n          this._isShiftTabbing = false;\n        }, 0);\n      }\n    });\n  }\n\n  protected updated(props: PropertyValues) {\n    if (props.has('opened')) {\n      this.dispatchEvent(\n        new CustomEvent('opened-changed', {\n          detail: { value: this.opened }\n        })\n      );\n    }\n\n    if (props.has('disabled') && this.header) {\n      if (this.disabled) {\n        this.removeAttribute('tabindex');\n        this.header.setAttribute('tabindex', '-1');\n      } else if (props.get('disabled')) {\n        this.setAttribute('tabindex', '0');\n        this.header.setAttribute('tabindex', '0');\n      }\n    }\n  }\n\n  private _setFocused(focused: boolean) {\n    if (focused) {\n      this.setAttribute('focused', '');\n    } else {\n      this.removeAttribute('focused');\n    }\n\n    if (focused && this._tabPressed) {\n      this.setAttribute('focus-ring', '');\n    } else {\n      this.removeAttribute('focus-ring');\n    }\n  }\n\n  private _onToggleClick() {\n    this.opened = !this.opened;\n  }\n\n  private _onToggleKeyDown(e: KeyboardEvent) {\n    if ([13, 32].indexOf(e.keyCode) > -1) {\n      e.preventDefault();\n      this.opened = !this.opened;\n    }\n  }\n\n  private _onBodyKeydown(e: KeyboardEvent) {\n    this._tabPressed = e.keyCode === 9;\n  }\n\n  private _onBodyKeyup() {\n    this._tabPressed = false;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'expansion-panel': ExpansionPanel;\n  }\n}\n"]}